<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adda - Restaurant & Caterer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --parchment: #fdfaf0; --terracotta: #a03025; --gold-accent: #c5a060; --teal-dark: #004b49; --veg-green: #2e7d32; --nonveg-red: #c62828; }
        body { background-color: var(--parchment); font-family: 'Inter', sans-serif; color: #2c2c2c; background-image: url('https://www.transparenttextures.com/patterns/aged-paper.png'); border-left: 8px solid var(--terracotta); border-right: 8px solid var(--terracotta); min-height: 100vh; }
        .hero-banner { padding: 40px 20px; text-align: center; }
        .main-logo { width: 100px; height: 100px; background: white; border-radius: 50%; border: 2px solid var(--gold-accent); margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .restaurant-name { font-family: 'Playfair Display', serif; font-size: 3rem; font-weight: 700; color: var(--terracotta); line-height: 1; }
        .restaurant-tagline { font-family: 'Playfair Display', serif; font-style: italic; color: var(--teal-dark); letter-spacing: 1px; font-size: 0.75rem; text-transform: uppercase; margin-top: 10px; }
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 20px; }
        .home-card { background: white; border: 1px solid rgba(197, 160, 96, 0.3); padding: 20px 10px; text-align: center; cursor: pointer; box-shadow: 4px 4px 0px var(--gold-accent); }
        .home-card-title { font-family: 'Playfair Display', serif; font-weight: 700; font-size: 0.85rem; color: var(--teal-dark); }
        #sticky-header { position: sticky; top: 0; z-index: 100; background: var(--parchment); border-bottom: 2px solid var(--gold-accent); padding: 10px; }
        #sub-nav-bar { display: flex; overflow-x: auto; gap: 10px; padding: 5px 0; scrollbar-width: none; }
        .sub-nav-item { padding: 6px 12px; background: white; border: 1px solid var(--gold-accent); border-radius: 20px; font-size: 0.7rem; font-weight: 700; white-space: nowrap; }
        .sub-nav-item.active { background: var(--terracotta); color: white; border-color: var(--terracotta); }
        .food-label { width: 14px; height: 14px; border: 1px solid; display: inline-flex; align-items: center; justify-content: center; margin-right: 8px; flex-shrink: 0; }
        .food-label div { width: 6px; height: 6px; border-radius: 50%; }
        .label-veg { border-color: var(--veg-green); } .label-veg div { background: var(--veg-green); }
        .label-nonveg { border-color: var(--nonveg-red); } .label-nonveg div { background: var(--nonveg-red); }
        .hidden { display: none !important; }
    </style>
</head>
<body class="max-w-md mx-auto">

    <div id="landing-page">
        <header class="hero-banner">
            <div class="main-logo"><img src="https://via.placeholder.com/100" alt="Logo"></div>
            <h1 class="restaurant-name">Adda</h1>
            <p class="restaurant-tagline">Colonial Flavours & Fine Dining</p>
        </header>
        <div id="categories-container" class="menu-grid">
            <p class="col-span-2 text-center py-10 opacity-50">Preparing the menu...</p>
        </div>
    </div>

    <div id="category-page" class="hidden">
        <div id="sticky-header">
            <button onclick="showHome()" class="text-[10px] font-bold text-white bg-[#004b49] px-3 py-1 rounded-full uppercase mb-2">‚Üê Back</button>
            <div id="sub-nav-bar"></div>
        </div>
        <div id="items-container" class="p-4 space-y-4"></div>
    </div>

    <script>
        // Using a CORS Proxy to bypass Zoho's security block
        const RAW_URL = 'https://sheet.zohopublic.in/sheet/published/shhin301ba89480b14ac0ad8136475ac17a77?download=csv&sheetname=Sheet1';
        const PROXY_URL = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(RAW_URL);
        
        let menuData = [];
        let groupedData = {};

        async function init() {
            try {
                const response = await fetch(PROXY_URL);
                if (!response.ok) throw new Error('Fetch failed');
                const text = await response.text();
                
                const rows = text.split(/\r?\n/).filter(r => r.trim() !== "");
                menuData = rows.slice(1).map(row => {
                    const c = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    return {
                        cat: (c[0]||"").replace(/"/g,'').trim(),
                        sub: (c[1]||"").replace(/"/g,'').trim(),
                        name: (c[2]||"").replace(/"/g,'').trim(),
                        desc: (c[3]||"").replace(/"/g,'').trim(),
                        price: (c[5]||"").replace(/"/g,'').trim(),
                        type: (c[7]||"").replace(/"/g,'').trim()
                    };
                }).filter(i => i.name && i.cat);

                renderHome();
            } catch (err) {
                document.getElementById('categories-container').innerHTML = `<p class="col-span-2 text-center text-red-600 font-bold py-10">Error loading data.<br><span class="text-xs font-normal">Try refreshing the page.</span></p>`;
            }
        }

        function renderHome() {
            const cats = [...new Set(menuData.map(i => i.cat))];
            document.getElementById('categories-container').innerHTML = cats.map(cat => `
                <div class="home-card" onclick="openCat('${cat}')">
                    <div class="text-2xl mb-2">üçΩÔ∏è</div>
                    <h3 class="home-card-title">${cat}</h3>
                </div>
            `).join('');
        }

        function openCat(catName) {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('category-page').classList.remove('hidden');
            
            const filtered = menuData.filter(i => i.cat === catName);
            groupedData = filtered.reduce((acc, i) => {
                const s = i.sub || 'General';
                if (!acc[s]) acc[s] = [];
                acc[s].push(i);
                return acc;
            }, {});

            const subs = Object.keys(groupedData);
            document.getElementById('sub-nav-bar').innerHTML = subs.map(s => `
                <div class="sub-nav-item" onclick="renderSub('${s}')">${s}</div>
            `).join('');
            renderSub(subs[0]);
        }

        function renderSub(subName) {
            document.querySelectorAll('.sub-nav-item').forEach(el => el.classList.toggle('active', el.innerText === subName));
            const items = groupedData[subName];
            document.getElementById('items-container').innerHTML = items.map(i => `
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <div class="flex justify-between items-start">
                        <div class="flex items-start">
                            <div class="food-label ${i.type.toLowerCase().includes('non') ? 'label-nonveg' : 'label-veg'} mt-1"><div></div></div>
                            <h4 class="font-bold text-sm text-[#a03025] font-serif">${i.name}</h4>
                        </div>
                        <span class="font-bold text-sm">‚Çπ${i.price}</span>
                    </div>
                    <p class="text-[11px] text-gray-500 italic mt-1">${i.desc}</p>
                </div>
            `).join('');
            window.scrollTo(0,0);
        }

        function showHome() {
            document.getElementById('landing-page').classList.remove('hidden');
            document.getElementById('category-page').classList.add('hidden');
        }

        init();
    </script>
</body>
</html>
